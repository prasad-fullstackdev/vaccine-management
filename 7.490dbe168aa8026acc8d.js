(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{eBm5:function(e,t,n){"use strict";n.r(t),n.d(t,"VaccineModule",(function(){return de}));var a=n("PCNd"),i=n("tyNb"),c=n("mrSG"),o=n("84Y0"),r=n("q5L8"),s=n("wgH9"),l=n("wbvY"),d=n("DHDI"),h=n("yAAq"),u=n("hJeS"),b=n("fXoL"),g=n("+803"),m=n("ofXK"),p=n("lDv4"),f=n("XiUz"),C=n("kmnG"),v=n("d3UM"),S=n("3Pt+"),k=n("qFsG"),V=n("iadO"),w=n("FKr1"),x=n("Wp6s"),D=n("wZkO"),L=n("bTqV"),y=n("NFeN"),O=n("+0xr"),I=n("znSr");function M(e,t){1&e&&b.Qb(0,"app-loader")}function P(e,t){if(1&e&&(b.Vb(0,"mat-option",13),b.Qc(1),b.Ub()),2&e){const e=t.$implicit;b.qc("value",e.talukaId),b.Cb(1),b.Sc(" ",e.talukaName," ")}}function q(e,t){if(1&e&&(b.Vb(0,"mat-option",13),b.Qc(1),b.Ub()),2&e){const e=t.$implicit;b.qc("value",e.vaccineCenterId),b.Cb(1),b.Sc(" ",e.vaccineCenterName," ")}}const U=function(e,t){return{width:e,"min-width":t}};function G(e,t){if(1&e&&(b.Vb(0,"th",27),b.Qc(1),b.Ub()),2&e){const e=b.hc().$implicit;b.qc("ngStyle",b.uc(2,U,e.width,e.width)),b.Cb(1),b.Sc(" ",e.title," ")}}function _(e,t){if(1&e){const e=b.Wb();b.Tb(0),b.Vb(1,"input",32),b.dc("input",(function(t){b.Dc(e);const n=b.hc().$implicit;return b.hc(5).onInputChange(t,n)}))("ngModelChange",(function(t){return b.Dc(e),b.hc().$implicit[b.hc().$implicit.index]=t})),b.Ub(),b.Sb()}if(2&e){const e=b.hc().$implicit,t=b.hc().$implicit;b.Cb(1),b.qc("ngModel",e[t.index])}}function T(e,t){if(1&e&&(b.Tb(0),b.Qc(1),b.Sb()),2&e){const e=b.hc().$implicit,t=b.hc().$implicit;b.Cb(1),b.Sc(" ",e[t.index]," ")}}function F(e,t){if(1&e&&(b.Vb(0,"td",28),b.Tb(1,29),b.Oc(2,_,2,1,"ng-container",30),b.Oc(3,T,2,1,"ng-container",31),b.Sb(),b.Ub()),2&e){const e=b.hc().$implicit;b.qc("ngStyle",b.uc(3,U,e.width,e.width)),b.Cb(1),b.qc("ngSwitch",e.type),b.Cb(1),b.qc("ngSwitchCase","textbox")}}function B(e,t){if(1&e&&(b.Tb(0),b.Tb(1,24),b.Oc(2,G,2,5,"th",25),b.Oc(3,F,4,6,"td",26),b.Sb(),b.Sb()),2&e){const e=t.$implicit;b.Cb(1),b.qc("matColumnDef",e.index)("sticky","left"===e.fixed)("stickyEnd","right"===e.fixed)}}function Q(e,t){1&e&&b.Qb(0,"tr",33)}function A(e,t){1&e&&b.Qb(0,"tr",34)}function $(e,t){if(1&e&&(b.Tb(0),b.Vb(1,"mat-tab",19),b.Vb(2,"div",20),b.Vb(3,"table",21),b.Oc(4,B,4,3,"ng-container",15),b.Oc(5,Q,1,0,"tr",22),b.Oc(6,A,1,0,"tr",23),b.Ub(),b.Ub(),b.Ub(),b.Sb()),2&e){const e=t.$implicit,n=b.hc(3);b.Cb(1),b.qc("label",e.ageGroupName+" Age Group"),b.Cb(2),b.qc("dataSource",n.vialStockByAgeGroup[e.ageGroupId]),b.Cb(1),b.qc("ngForOf",n.columns),b.Cb(1),b.qc("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),b.Cb(1),b.qc("matRowDefColumns",n.displayedColumns)}}function N(e,t){if(1&e){const e=b.Wb();b.Vb(0,"div",3),b.Vb(1,"mat-card"),b.Vb(2,"mat-tab-group",14),b.dc("selectedTabChange",(function(t){return b.Dc(e),b.hc(2).onTabChanged(t.tab.index)})),b.Oc(3,$,7,6,"ng-container",15),b.Ub(),b.Vb(4,"div",16),b.Vb(5,"button",17),b.dc("click",(function(){return b.Dc(e),b.hc(2).onSaveVialsStockDetail()})),b.Vb(6,"mat-icon"),b.Qc(7,"save"),b.Ub(),b.Vb(8,"span",18),b.Qc(9," Save Vials Stock Detail"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub()}if(2&e){const e=b.hc(2);b.Cb(2),b.qc("selectedIndex",e.selectedTabIndex),b.Cb(1),b.qc("ngForOf",e.ageGroupList)}}function j(e,t){if(1&e){const e=b.Wb();b.Vb(0,"div",2),b.Vb(1,"div",3),b.Vb(2,"div",4),b.Vb(3,"div",5),b.Vb(4,"div",6),b.Vb(5,"mat-form-field"),b.Vb(6,"mat-label"),b.Qc(7,"Select Taluka"),b.Ub(),b.Vb(8,"mat-select",7),b.dc("selectionChange",(function(t){return b.Dc(e),b.hc().onTalukaChange(t.value)}))("ngModelChange",(function(t){return b.Dc(e),b.hc().requestVialStock.talukaId=t})),b.Oc(9,P,2,2,"mat-option",8),b.Ub(),b.Ub(),b.Ub(),b.Vb(10,"div",6),b.Vb(11,"mat-form-field"),b.Vb(12,"mat-label"),b.Qc(13,"Select Vaccine Center"),b.Ub(),b.Vb(14,"mat-select",7),b.dc("selectionChange",(function(t){return b.Dc(e),b.hc().onCenterChange(t)}))("ngModelChange",(function(t){return b.Dc(e),b.hc().requestVialStock.vaccineCenterId=t})),b.Oc(15,q,2,2,"mat-option",8),b.Ub(),b.Ub(),b.Ub(),b.Vb(16,"div",6),b.Vb(17,"mat-form-field"),b.Vb(18,"mat-label"),b.Qc(19,"Received Date"),b.Ub(),b.Vb(20,"input",9),b.dc("ngModelChange",(function(t){return b.Dc(e),b.hc().receivedDate=t}))("dateChange",(function(t){return b.Dc(e),b.hc().onDateChange(t)})),b.Ub(),b.Qb(21,"mat-datepicker-toggle",10),b.Qb(22,"mat-datepicker",null,11),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Oc(24,N,10,2,"div",12),b.Ub()}if(2&e){const e=b.Ac(23),t=b.hc();b.Cb(8),b.qc("ngModel",t.requestVialStock.talukaId),b.Cb(1),b.qc("ngForOf",t.talukaList),b.Cb(5),b.qc("ngModel",t.requestVialStock.vaccineCenterId),b.Cb(1),b.qc("ngForOf",t.vaccineCenterList),b.Cb(5),b.qc("ngModel",t.receivedDate)("matDatepicker",e)("max",t.maxDate),b.Cb(1),b.qc("for",e),b.Cb(3),b.qc("ngIf",t.requestVialStock.vaccineCenterId>0)}}let R=(()=>{class e{constructor(e,t,n,a,i){this.authService=e,this.sharedService=t,this.vaccineService=n,this.snackBarService=a,this.lookupService=i,this.isShowLoader=!1,this.isLinear=!1,this.columns=H,this.displayedColumns=this.columns.map(e=>e.index),this.selectedTabIndex=0,this.receivedDate=new Date,this.vaccineCenterList=[],this.vaccineCompanyList=[],this.ageGroupList=[],this.vialStockByAgeGroup={},this.maxDate=new Date,this.districtList=[],this.talukaList=[],this.requestVialStock=new u.g}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.requestVialStock.districtId=this.authService.loggedInUser.districtId,this.requestVialStock.talukaId=this.authService.loggedInUser.talukaId,this.requestVialStock.vaccineCenterId=this.authService.loggedInUser.vaccineCenterId,this.getTalukaList(this.requestVialStock.districtId),this.getVaccineCenterList(this.requestVialStock.talukaId),yield this.getVaccineCompanyList(),yield this.getAgeGroupList();const e=this.sharedService.formatDate(new Date);this.getVialsStockDetailList(e)}))}getVaccineCompanyList(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.lookupService.getVaccineCompanyList().toPromise();this.vaccineCompanyList=e}))}getAgeGroupList(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.lookupService.getAgeGroupList().toPromise();this.ageGroupList=e}))}getVaccineCenterList(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.lookupService.getVaccineCenterList(e).toPromise();this.vaccineCenterList=t}))}onTabChanged(e){}onDateChange(e){console.log("onDateChange",e);const t=this.sharedService.formatDate(e.value);this.getVialsStockDetailList(t)}onTalukaChange(e){console.log("onTalukaChange",e),this.requestVialStock.vaccineCenterId=0,this.getVaccineCenterList(e)}onCenterChange(e){const t=this.sharedService.formatDate(this.receivedDate);this.getVialsStockDetailList(t)}getTalukaList(e){e>0&&this.lookupService.getTalukaList(e).subscribe(e=>{console.log("talukaList",e),this.talukaList=e},e=>{console.error("error",e)})}getVialsStockDetailList(e){this.requestVialStock.receivedDate=e,this.isShowLoader=!0,this.vaccineService.getVialsStockDetail(this.requestVialStock).subscribe(e=>{this.isShowLoader=!1,console.log("vialStockByAgeGroup",e),this.vialStockByAgeGroup=e.reduce((e,t)=>(e[t.ageGroupId]=e[t.ageGroupId]||[],e[t.ageGroupId].push(t),e),Object.create(null)),console.log(this.vialStockByAgeGroup)},e=>{this.isShowLoader=!1,console.error("error",e)})}onInputChange(e,t){let n=t.balance,a=t.received,i=t.used,c=t.damage;n=null==n?0:Number(n),a=null==a?0:Number(a),i=null==i?0:Number(i),c=null==c?0:Number(c),t.remaining=n+a-(i+c)}getVialStockList(){const e=[];return this.ageGroupList.forEach(t=>{this.vialStockByAgeGroup[t.ageGroupId].forEach(t=>{e.push(t)})}),e}onSaveVialsStockDetail(){if(null==this.receivedDate)return this.snackBarService.showFailureSnackBar(r.c.SelectReceivedDate),!1;const e=this.getVialStockList();console.log("vialStockList",e),this.isShowLoader=!0,this.vaccineService.saveVialsStockDetail(e).subscribe(e=>{this.isShowLoader=!1,this.snackBarService.showSuccessSnackBar(r.c.SaveStockDetailSuccess),this.selectedTabIndex=this.selectedTabIndex==this.ageGroupList.length-1?this.selectedTabIndex:this.ageGroupList.length+1,console.log("savedVialStockList",e)},e=>{this.isShowLoader=!1,this.snackBarService.showFailureSnackBar(r.c.SaveStockDetailFail),console.error("error",e)})}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(o.a),b.Pb(l.a),b.Pb(h.a),b.Pb(d.a),b.Pb(s.a))},e.\u0275cmp=b.Jb({type:e,selectors:[["app-manage-stock"]],decls:3,vars:2,consts:[[4,"ngIf"],["fxLayout","row wrap","class","matero-row",4,"ngIf"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.gt-sm","100",1,"matero-col"],["fxLayout","row","fxLayoutGap","8px grid"],["fxFlex","100","fxFlex.lt-sm","100"],["fxFlex","25","fxFlex.lt-sm","100"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Received Date",3,"ngModel","matDatepicker","max","ngModelChange","dateChange"],["matSuffix","",3,"for"],["receivedDatePicker",""],["fxFlex","100","fxFlex.gt-sm","100","class","matero-col",4,"ngIf"],[3,"value"],[1,"m--16",3,"selectedIndex","selectedTabChange"],[4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-evenly center"],["id","btn-save-stock-detail","mat-raised-button","","color","primary",3,"click"],[1,"p-4"],[3,"label"],[1,"matero-table-container","mat-elevation-z1"],["mat-table","",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef","sticky","stickyEnd"],["mat-header-cell","",3,"ngStyle",4,"matHeaderCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["mat-header-cell","",3,"ngStyle"],["mat-cell","",3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["placeholder","Vials Stock","type","number",1,"stock-count",3,"ngModel","input","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(b.Qb(0,"breadcrumb"),b.Oc(1,M,1,0,"app-loader",0),b.Oc(2,j,25,9,"div",1)),2&e&&(b.Cb(1),b.qc("ngIf",t.isShowLoader),b.Cb(1),b.qc("ngIf",t.ageGroupList&&t.ageGroupList.length>0))},directives:[g.a,m.t,p.a,f.f,f.b,f.g,C.c,C.g,v.a,S.v,S.y,m.s,k.b,S.e,V.l,V.o,C.j,V.g,w.o,x.a,D.c,f.e,L.b,y.a,D.a,O.o,O.k,O.n,O.c,O.i,O.b,O.h,m.w,I.d,O.a,m.x,m.y,m.z,S.B,O.j,O.m],styles:[".matero-table-container[_ngcontent-%COMP%]{height:300px;overflow:auto;width:100%}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{width:100%}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child, .matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:first-child{text-align:left}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{justify-content:flex-start!important;white-space:pre-wrap;word-break:break-word;text-align:center}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell.mat-column-options[_ngcontent-%COMP%], .matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell.mat-column-options[_ngcontent-%COMP%], .stock-count[_ngcontent-%COMP%]{text-align:center}.stock-count[_ngcontent-%COMP%]{outline:none;border:none;border-bottom:2px solid #ddd;margin-top:15px;width:100px}#btn-save-stock-detail[_ngcontent-%COMP%]{margin-top:20px}"]}),e})();const H=[{title:"Vaccine Name",index:"vaccineName",width:"16.66%"},{title:"Balance",index:"balance",width:"16.66%",type:"textbox"},{title:"Received",index:"received",width:"16.66%",type:"textbox"},{title:"Used",index:"used",width:"16.66%",type:"textbox"},{title:"Damaged",index:"damage",width:"16.66%",type:"textbox"},{title:"Remaining",index:"remaining",width:"16.66%"}];function E(e,t){1&e&&b.Qb(0,"app-loader")}function W(e,t){if(1&e&&(b.Vb(0,"mat-option",13),b.Qc(1),b.Ub()),2&e){const e=t.$implicit;b.qc("value",e.talukaId),b.Cb(1),b.Sc(" ",e.talukaName," ")}}function z(e,t){if(1&e&&(b.Vb(0,"mat-option",13),b.Qc(1),b.Ub()),2&e){const e=t.$implicit;b.qc("value",e.vaccineCenterId),b.Cb(1),b.Sc(" ",e.vaccineCenterName," ")}}const J=function(e,t){return{width:e,"min-width":t}};function X(e,t){if(1&e&&(b.Vb(0,"th",27),b.Qc(1),b.Ub()),2&e){const e=b.hc().$implicit;b.qc("ngStyle",b.uc(2,J,e.width,e.width)),b.Cb(1),b.Sc(" ",e.title," ")}}function K(e,t){if(1&e){const e=b.Wb();b.Tb(0),b.Vb(1,"input",32),b.dc("input",(function(t){b.Dc(e);const n=b.hc().$implicit;return b.hc(5).onInputChange(t,n)}))("ngModelChange",(function(t){return b.Dc(e),b.hc().$implicit[b.hc().$implicit.index]=t})),b.Ub(),b.Sb()}if(2&e){const e=b.hc().$implicit,t=b.hc().$implicit;b.Cb(1),b.qc("ngModel",e[t.index])}}function Y(e,t){if(1&e&&(b.Tb(0),b.Qc(1),b.Sb()),2&e){const e=b.hc().$implicit,t=b.hc().$implicit;b.Cb(1),b.Sc(" ",e[t.index]," ")}}function Z(e,t){if(1&e&&(b.Vb(0,"td",28),b.Tb(1,29),b.Oc(2,K,2,1,"ng-container",30),b.Oc(3,Y,2,1,"ng-container",31),b.Sb(),b.Ub()),2&e){const e=b.hc().$implicit;b.qc("ngStyle",b.uc(3,J,e.width,e.width)),b.Cb(1),b.qc("ngSwitch",e.type),b.Cb(1),b.qc("ngSwitchCase","textbox")}}function ee(e,t){if(1&e&&(b.Tb(0),b.Tb(1,24),b.Oc(2,X,2,5,"th",25),b.Oc(3,Z,4,6,"td",26),b.Sb(),b.Sb()),2&e){const e=t.$implicit;b.Cb(1),b.qc("matColumnDef",e.index)("sticky","left"===e.fixed)("stickyEnd","right"===e.fixed)}}function te(e,t){1&e&&b.Qb(0,"tr",33)}function ne(e,t){1&e&&b.Qb(0,"tr",34)}function ae(e,t){if(1&e&&(b.Tb(0),b.Vb(1,"mat-tab",19),b.Vb(2,"div",20),b.Vb(3,"table",21),b.Oc(4,ee,4,3,"ng-container",15),b.Oc(5,te,1,0,"tr",22),b.Oc(6,ne,1,0,"tr",23),b.Ub(),b.Ub(),b.Ub(),b.Sb()),2&e){const e=t.$implicit,n=b.hc(3);b.Cb(1),b.qc("label",e.ageGroupName+" Age Group"),b.Cb(2),b.qc("dataSource",n.vaccinationByAgeGroup[e.ageGroupId]),b.Cb(1),b.qc("ngForOf",n.columns),b.Cb(1),b.qc("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),b.Cb(1),b.qc("matRowDefColumns",n.displayedColumns)}}function ie(e,t){if(1&e){const e=b.Wb();b.Vb(0,"div",3),b.Vb(1,"mat-card"),b.Vb(2,"mat-tab-group",14),b.dc("selectedTabChange",(function(t){return b.Dc(e),b.hc(2).onTabChanged(t.tab.index)})),b.Oc(3,ae,7,6,"ng-container",15),b.Ub(),b.Vb(4,"div",16),b.Vb(5,"button",17),b.dc("click",(function(){return b.Dc(e),b.hc(2).onSaveVaccinationDetail()})),b.Vb(6,"mat-icon"),b.Qc(7,"save"),b.Ub(),b.Vb(8,"span",18),b.Qc(9," Save Vaccination Detail"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub()}if(2&e){const e=b.hc(2);b.Cb(2),b.qc("selectedIndex",e.selectedTabIndex),b.Cb(1),b.qc("ngForOf",e.ageGroupList)}}function ce(e,t){if(1&e){const e=b.Wb();b.Vb(0,"div",2),b.Vb(1,"div",3),b.Vb(2,"div",4),b.Vb(3,"div",5),b.Vb(4,"div",6),b.Vb(5,"mat-form-field"),b.Vb(6,"mat-label"),b.Qc(7,"Select Taluka"),b.Ub(),b.Vb(8,"mat-select",7),b.dc("selectionChange",(function(t){return b.Dc(e),b.hc().onTalukaChange(t.value)}))("ngModelChange",(function(t){return b.Dc(e),b.hc().requestVaccinatedPeople.talukaId=t})),b.Oc(9,W,2,2,"mat-option",8),b.Ub(),b.Ub(),b.Ub(),b.Vb(10,"div",6),b.Vb(11,"mat-form-field"),b.Vb(12,"mat-label"),b.Qc(13,"Select Vaccine Center"),b.Ub(),b.Vb(14,"mat-select",7),b.dc("selectionChange",(function(t){return b.Dc(e),b.hc().onCenterChange(t)}))("ngModelChange",(function(t){return b.Dc(e),b.hc().requestVaccinatedPeople.vaccineCenterId=t})),b.Oc(15,z,2,2,"mat-option",8),b.Ub(),b.Ub(),b.Ub(),b.Vb(16,"div",6),b.Vb(17,"mat-form-field"),b.Vb(18,"mat-label"),b.Qc(19,"Vaccination Date"),b.Ub(),b.Vb(20,"input",9),b.dc("ngModelChange",(function(t){return b.Dc(e),b.hc().vaccinationDate=t}))("dateChange",(function(t){return b.Dc(e),b.hc().onDateChange(t)})),b.Ub(),b.Qb(21,"mat-datepicker-toggle",10),b.Qb(22,"mat-datepicker",null,11),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Oc(24,ie,10,2,"div",12),b.Ub()}if(2&e){const e=b.Ac(23),t=b.hc();b.Cb(8),b.qc("ngModel",t.requestVaccinatedPeople.talukaId),b.Cb(1),b.qc("ngForOf",t.talukaList),b.Cb(5),b.qc("ngModel",t.requestVaccinatedPeople.vaccineCenterId),b.Cb(1),b.qc("ngForOf",t.vaccineCenterList),b.Cb(5),b.qc("ngModel",t.vaccinationDate)("matDatepicker",e)("max",t.maxDate),b.Cb(1),b.qc("for",e),b.Cb(3),b.qc("ngIf",t.requestVaccinatedPeople.vaccineCenterId>0)}}let oe=(()=>{class e{constructor(e,t,n,a,i){this.authService=e,this.sharedService=t,this.vaccineService=n,this.snackBarService=a,this.lookupService=i,this.isShowLoader=!1,this.columns=re,this.displayedColumns=this.columns.map(e=>e.index),this.selectedTabIndex=0,this.vaccineCenterId=0,this.vaccinationDate=new Date,this.vaccineCenterList=[],this.vaccineCompanyList=[],this.ageGroupList=[],this.vaccinationByAgeGroup={},this.maxDate=new Date,this.districtList=[],this.talukaList=[],this.requestVaccinatedPeople=new u.e}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.requestVaccinatedPeople.districtId=this.authService.loggedInUser.districtId,this.requestVaccinatedPeople.talukaId=this.authService.loggedInUser.talukaId,this.requestVaccinatedPeople.vaccineCenterId=this.authService.loggedInUser.vaccineCenterId,this.getTalukaList(this.requestVaccinatedPeople.districtId),this.getVaccineCenterList(this.requestVaccinatedPeople.talukaId),yield this.getVaccineCompanyList(),yield this.getAgeGroupList(),this.vaccineCenterId=this.authService.loggedInUser.vaccineCenterId;const e=this.sharedService.formatDate(new Date);this.getVaccinationDetailList(e)}))}getVaccineCompanyList(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.lookupService.getVaccineCompanyList().toPromise();this.vaccineCompanyList=e}))}getAgeGroupList(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.lookupService.getAgeGroupList().toPromise();this.ageGroupList=e}))}getVaccineCenterList(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.lookupService.getVaccineCenterList(e).toPromise();this.vaccineCenterList=t}))}onTabChanged(e){}onDateChange(e){console.log("onDateChange",e);const t=this.sharedService.formatDate(e.value);this.getVaccinationDetailList(t)}onTalukaChange(e){console.log("onTalukaChange",e),this.requestVaccinatedPeople.vaccineCenterId=0,this.getVaccineCenterList(e)}onCenterChange(e){const t=this.sharedService.formatDate(this.vaccinationDate);this.getVaccinationDetailList(t)}getTalukaList(e){e>0&&this.lookupService.getTalukaList(e).subscribe(e=>{console.log("talukaList",e),this.talukaList=e},e=>{console.error("error",e)})}getVaccinationDetailList(e){this.requestVaccinatedPeople.vaccinationDate=e,this.isShowLoader=!0,this.vaccineService.getVaccinationDetailList(this.requestVaccinatedPeople).subscribe(e=>{this.isShowLoader=!1,console.log("vaccinationByAgeGroup",e),this.vaccinationByAgeGroup=e.reduce((e,t)=>(e[t.ageGroupId]=e[t.ageGroupId]||[],e[t.ageGroupId].push(t),e),Object.create(null)),console.log(this.vaccinationByAgeGroup)},e=>{this.isShowLoader=!1,console.error("error",e)})}onInputChange(e,t){let n=t.firstDose,a=t.secondDose;n=null==n?0:Number(n),a=null==a?0:Number(a),t.total=n+a}getVaccinationList(){const e=[];return this.ageGroupList.forEach(t=>{this.vaccinationByAgeGroup[t.ageGroupId].forEach(t=>{e.push(t)})}),e}onSaveVaccinationDetail(){if(null==this.vaccinationDate)return this.snackBarService.showFailureSnackBar(r.c.SelectVaccinationDate),!1;const e=this.getVaccinationList();console.log("vaccinationList",e),this.isShowLoader=!0,this.vaccineService.saveVaccinatedPeople(e).subscribe(e=>{this.isShowLoader=!1,console.log("savedVaccinationList",e),this.snackBarService.showSuccessSnackBar(r.c.SaveVaccinationDetailSuccess),this.selectedTabIndex=this.selectedTabIndex==this.ageGroupList.length-1?this.selectedTabIndex:this.ageGroupList.length+1},e=>{this.isShowLoader=!1,this.snackBarService.showFailureSnackBar(r.c.SaveVaccinationDetailFail),console.error("error",e)})}}return e.\u0275fac=function(t){return new(t||e)(b.Pb(o.a),b.Pb(l.a),b.Pb(h.a),b.Pb(d.a),b.Pb(s.a))},e.\u0275cmp=b.Jb({type:e,selectors:[["app-manage-vaccination-detail"]],decls:3,vars:2,consts:[[4,"ngIf"],["fxLayout","row wrap","class","matero-row",4,"ngIf"],["fxLayout","row wrap",1,"matero-row"],["fxFlex","100","fxFlex.gt-sm","100",1,"matero-col"],["fxLayout","row","fxLayoutGap","8px grid"],["fxFlex","100","fxFlex.lt-sm","100"],["fxFlex","25","fxFlex.lt-sm","100"],[3,"ngModel","selectionChange","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Received Date",3,"ngModel","matDatepicker","max","ngModelChange","dateChange"],["matSuffix","",3,"for"],["vaccinationDatePicker",""],["fxFlex","100","fxFlex.gt-sm","100","class","matero-col",4,"ngIf"],[3,"value"],[1,"m--16",3,"selectedIndex","selectedTabChange"],[4,"ngFor","ngForOf"],["fxLayout","row wrap","fxLayoutAlign","space-evenly center"],["id","btn-save-vaccination-detail","mat-raised-button","","color","primary",3,"click"],[1,"p-4"],[3,"label"],[1,"matero-table-container","mat-elevation-z1"],["mat-table","",3,"dataSource"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef","sticky","stickyEnd"],["mat-header-cell","",3,"ngStyle",4,"matHeaderCellDef"],["mat-cell","",3,"ngStyle",4,"matCellDef"],["mat-header-cell","",3,"ngStyle"],["mat-cell","",3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["placeholder","Vials Stock","type","number",1,"stock-count",3,"ngModel","input","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(b.Qb(0,"breadcrumb"),b.Oc(1,E,1,0,"app-loader",0),b.Oc(2,ce,25,9,"div",1)),2&e&&(b.Cb(1),b.qc("ngIf",t.isShowLoader),b.Cb(1),b.qc("ngIf",t.ageGroupList&&t.ageGroupList.length>0))},directives:[g.a,m.t,p.a,f.f,f.b,f.g,C.c,C.g,v.a,S.v,S.y,m.s,k.b,S.e,V.l,V.o,C.j,V.g,w.o,x.a,D.c,f.e,L.b,y.a,D.a,O.o,O.k,O.n,O.c,O.i,O.b,O.h,m.w,I.d,O.a,m.x,m.y,m.z,S.B,O.j,O.m],styles:[".matero-table-container[_ngcontent-%COMP%]{height:300px;overflow:auto;width:100%}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]{width:100%}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child, .matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:first-child{text-align:left}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{justify-content:flex-start!important;white-space:pre-wrap;word-break:break-word;text-align:center}.matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-cell.mat-column-options[_ngcontent-%COMP%], .matero-table-container[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-header-cell.mat-column-options[_ngcontent-%COMP%], .stock-count[_ngcontent-%COMP%]{text-align:center}.stock-count[_ngcontent-%COMP%]{outline:none;border:none;border-bottom:2px solid #ddd;margin-top:15px;width:100px}#btn-save-vaccination-detail[_ngcontent-%COMP%]{margin-top:20px}"]}),e})();const re=[{title:"Vaccine Name",index:"vaccineName",width:"25%"},{title:"1st Dose",index:"firstDose",width:"25%",type:"textbox"},{title:"2nd Doee",index:"secondDose",width:"25%",type:"textbox"},{title:"Total",index:"total",width:"25%"}],se=[{path:"manage-stock",component:R,data:{title:"Manage Stock",titleI18n:"Manage Stock"}},{path:"manage-vaccination-detail",component:oe,data:{title:"Manage Vaccination Detail",titleI18n:"Manage Vaccination Detail"}}];let le=(()=>{class e{}return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[i.j.forChild(se)],i.j]}),e})(),de=(()=>{class e{}return e.\u0275mod=b.Nb({type:e}),e.\u0275inj=b.Mb({factory:function(t){return new(t||e)},imports:[[a.a,le]]}),e})()}}]);